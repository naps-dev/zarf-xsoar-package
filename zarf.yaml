kind: ZarfPackageConfig
metadata:
  name: xsoar
  description: "Deployes Palo Alto XSOAR product"
  architecture: amd64

variables:
  - name: BRANCH
    default: "main"
    prompt: true

constants:
  - name: XSOAR_REPOSITORY
    value: "###ZARF_PKG_VAR_XSOAR_REPOSITORY###"
  
  - name: XSOAR_TAG
    value: "###ZARF_PKG_VAR_XSOAR_TAG###"

  - name: FUSE_REPOSITORY
    value: "###ZARF_PKG_VAR_FUSE_REPOSITORY###"
  
  - name: FUSE_TAG
    value: "###ZARF_PKG_VAR_FUSE_TAG###"

components:
  - name: xsoar
    description: "Palo Alto XSOAR"
    required: true
    repos:
      - https://github.com/naps-dev/zarf-xsoar-package.git
    manifests:
      - name: xsoar-helm
        namespace: xsoar
        files:
          - manifests/namespace.yaml
          - manifests/gitrepository.yaml
          - manifests/helmrelease.yaml
    images:
      - "###ZARF_PKG_VAR_XSOAR_REPOSITORY###:###ZARF_PKG_VAR_XSOAR_TAG###"
      - "###ZARF_PKG_VAR_FUSE_REPOSITORY###:###ZARF_PKG_VAR_FUSE_TAG###"